import{a as P,b as q}from"./chunk-XSEMXUFG.js";import{a as O,b as p,c as U}from"./chunk-23W66GLT.js";import{a as E}from"./chunk-2AZPC3K3.js";import"./chunk-7JDTD5PV.js";import{da as L}from"./chunk-G46RF4U2.js";import"./chunk-QXA7VEUO.js";import{a as w}from"./chunk-ENGL65RD.js";import"./chunk-32FVIJUL.js";import"./chunk-2IXFTJ2H.js";import{a as R,b as z,d as N,i as B,l as $,q as b,r as J}from"./chunk-5ASYMZAG.js";import{b as W}from"./chunk-PHZ4YKFG.js";import"./chunk-T2ZIFUV5.js";import"./chunk-KENT5INO.js";import{e as C}from"./chunk-FHVUNOKG.js";import"./chunk-3OH2LOAZ.js";import{H as I,Ib as n,Mb as A,Nb as V,Ob as D,Qb as _,Sa as a,Ta as u,ba as x,db as v,fb as c,kb as g,la as h,lb as M,ma as y,nb as F,ob as T,pb as e,qb as t,rb as m,tb as j,wb as s,xb as S}from"./chunk-LUMD5QXA.js";import"./chunk-AIZVJUQQ.js";function Q(o,f){if(o&1){let r=j();e(0,"div",7)(1,"input",12),D("ngModelChange",function(i){let d=h(r).$index,k=S();return V(k.receiver[d],i)||(k.receiver[d]=i),y(i)}),t(),e(2,"ng-icon",13),s("click",function(){let i=h(r).$index,d=S();return y(d.deleteReceiver(d.receiver[i]))}),t()()}if(o&2){let r=f.$index,l=S();a(),A("ngModel",l.receiver[r])}}var G=(()=>{class o{formService;integrationService;toastr;formConfig=new O({receivers:new p([]),active:new p(!0),scanCompletedEvent:new p(!1),scanFailedEvent:new p(!1),securityAlertEvent:new p(!0),fixedFindingEvent:new p(!0),newFindingEvent:new p(!0)});form;receiver=[];constructor(r,l,i){this.formService=r,this.integrationService=l,this.toastr=i,this.form=this.formService.group(this.formConfig)}ngOnInit(){this.integrationService.getMailIntegrationSetting().subscribe(r=>{this.form.patchValue(r),this.receiver=r.receivers})}saveConfig(){this.form.disable(),this.form.controls.receivers.setValue(this.receiver.filter(r=>r.length>0)),this.integrationService.updateMailIntegrationSetting({body:this.form.getRawValue()}).pipe(I(()=>this.form.enable())).subscribe(()=>{this.toastr.success("Update success!")})}deleteReceiver(r){this.receiver=this.receiver.filter(l=>l!=r)}addEmail(){this.receiver.push("")}static \u0275fac=function(l){return new(l||o)(u(U),u(E),u(L))};static \u0275cmp=x({type:o,selectors:[["app-mail-integration"]],standalone:!0,features:[_],decls:42,vars:8,consts:[[1,"flex","flex-col","rounded-xl","bg-background","gap-4","w-full"],[1,"flex","flex-col","gap-2","w-full"],[1,"flex","flex-row","gap-2","w-full","items-center"],[1,"w-36","md:w-48"],[1,"w-full","max-w-md"],["type","checkbox",3,"formControl"],[1,"flex","flex-col","gap-1"],[1,"w-full","max-w-md","flex","flex-row","items-center","gap-2"],["app-button","","type","default",1,"w-fit",3,"click"],[1,"flex","flex-row","gap-2","w-full"],[1,"flex","flex-row","gap-2","items-center"],["app-button","","type","primary",1,"w-fit",3,"click","loading","disabled"],["type","email","placeholder","Email address",1,"w-full",3,"ngModelChange","ngModel"],["name","trash",1,"cursor-pointer",3,"click"]],template:function(l,i){l&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),n(4,"Enable"),t(),e(5,"div",4),m(6,"input",5),t()(),e(7,"div",2)(8,"span",3),n(9,"Receiver"),t(),e(10,"div",6),F(11,Q,3,1,"div",7,M),e(13,"button",8),s("click",function(){return i.addEmail()}),n(14,"Add another"),t()()(),e(15,"div",9)(16,"span",3),n(17,"Event"),t(),e(18,"div",6)(19,"div",10),m(20,"input",5),e(21,"label"),n(22,"Scan Completed"),t()(),e(23,"div",10),m(24,"input",5),e(25,"label"),n(26,"Scan Failed"),t()(),e(27,"div",10),m(28,"input",5),e(29,"label"),n(30,"Security Alert"),t()(),e(31,"div",10),m(32,"input",5),e(33,"label"),n(34,"New Finding"),t()(),e(35,"div",10),m(36,"input",5),e(37,"label"),n(38,"Fixed Finding"),t()()()()(),e(39,"div",10)(40,"button",11),s("click",function(){return i.saveConfig()}),n(41,"Update"),t()()()),l&2&&(a(6),c("formControl",i.form.controls.active),a(5),T(i.receiver),a(9),c("formControl",i.form.controls.scanCompletedEvent),a(4),c("formControl",i.form.controls.scanFailedEvent),a(4),c("formControl",i.form.controls.securityAlertEvent),a(4),c("formControl",i.form.controls.newFindingEvent),a(4),c("formControl",i.form.controls.fixedFindingEvent),a(4),c("loading",i.form.disabled)("disabled",i.form.disabled))},dependencies:[w,b,z,R,N,B,J,$,C]})}return o})();function X(o,f){o&1&&(e(0,"div",14),m(1,"ng-icon",21),e(2,"span"),n(3,"Active"),t()())}function Y(o,f){o&1&&m(0,"app-mail-integration",18)}function Z(o,f){o&1&&(e(0,"div",14),m(1,"ng-icon",21),e(2,"span"),n(3,"Active"),t()())}function ee(o,f){o&1&&m(0,"app-teams",18)}function te(o,f){o&1&&(e(0,"div",14),m(1,"ng-icon",21),e(2,"span"),n(3,"Active"),t()())}function ie(o,f){o&1&&m(0,"app-jira",18)}var be=(()=>{class o{integrationService;config={mail:!1,teams:!1,jira:!1};integrationSetting={};constructor(r){this.integrationService=r}ngOnInit(){this.integrationService.getIntegrationSetting().subscribe(r=>{this.integrationSetting=r})}static \u0275fac=function(l){return new(l||o)(u(E))};static \u0275cmp=x({type:o,selectors:[["app-integration"]],standalone:!0,features:[_],decls:57,vars:6,consts:[[1,"mx-auto","px-2","lg:px-6","flex","flex-col","pt-6","text-sm"],[1,"font-semibold","text-foreground","mb-2","ml-1","text-xl"],[1,"flex","flex-col","rounded-xl","border","border-border","bg-background","gap-4","p-4","w-full"],[1,"overflow-x-auto"],[1,"flex","flex-col","gap-4","w-full"],[1,"flex","flex-col","border-b","border-border","p-2","gap-2"],[1,"flex","flex-row","gap-2"],[1,"w-full"],[1,"flex","flex-row","gap-2","items-center"],[1,"flex","flex-row","border","border-border","w-10","h-10","rounded","items-center","justify-center"],["name","heroEnvelope","size","28"],[1,"flex","flex-col"],[1,"flex","flex-row","items-center","gap-2"],[1,"font-semibold"],[1,"flex","flex-row","items-center","gap-1","rounded-full","px-1.5","py-0.5","text-xs","bg-green-100","text-green-800","dark:bg-green-900","dark:text-green-300"],[1,"hidden","md:block"],[1,"w-fit"],["app-button","","type","default",1,"w-fit",3,"click"],[1,"ml-12","mt-4"],["name","teams","size","28"],["name","jira","size","36"],["name","heroCheckCircle","size","18"]],template:function(l,i){l&1&&(e(0,"div",0)(1,"div",1),n(2,"Integration"),t(),e(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),m(11,"ng-icon",10),t(),e(12,"div",11)(13,"div",12)(14,"div",13),n(15,"Mail"),t(),v(16,X,4,0,"div",14),t(),e(17,"div",15),n(18,"Send notifications of all projects to via mail."),t()()()(),e(19,"div",16)(20,"button",17),s("click",function(){return i.config.mail=!i.config.mail}),n(21," Configure "),t()()(),v(22,Y,1,0,"app-mail-integration",18),t(),e(23,"div",5)(24,"div",6)(25,"div",7)(26,"div",8)(27,"div",9),m(28,"ng-icon",19),t(),e(29,"div",11)(30,"div",12)(31,"div",13),n(32,"Microsoft Teams"),t(),v(33,Z,4,0,"div",14),t(),e(34,"div",15),n(35,"Send notifications of all projects to your Microsoft Teams channels. "),t()()()(),e(36,"div",16)(37,"button",17),s("click",function(){return i.config.teams=!i.config.teams}),n(38," Configure "),t()()(),v(39,ee,1,0,"app-teams",18),t(),e(40,"div",5)(41,"div",6)(42,"div",7)(43,"div",8)(44,"div",9),m(45,"ng-icon",20),t(),e(46,"div",11)(47,"div",12)(48,"div",13),n(49,"Jira Issue"),t(),v(50,te,4,0,"div",14),t(),e(51,"div",15),n(52,"Create ticket to your Jira."),t()()()(),e(53,"div",16)(54,"button",17),s("click",function(){return i.config.jira=!i.config.jira}),n(55," Configure "),t()()(),v(56,ie,1,0,"app-jira",18),t()()()()()),l&2&&(a(16),g(i.integrationSetting.mail?16:-1),a(6),g(i.config.mail?22:-1),a(11),g(i.integrationSetting.teams?33:-1),a(6),g(i.config.teams?39:-1),a(11),g(i.integrationSetting.jira?50:-1),a(6),g(i.config.jira?56:-1))},dependencies:[w,b,C,W,q,P,G]})}return o})();export{be as IntegrationComponent};
