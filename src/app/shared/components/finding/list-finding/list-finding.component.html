<div class="flex flex-col border-border border">
  <div class="">
    <div class="flex flex-wrap w-full border-b border-border p-4 gap-2 items-center justify-between">
      <!--SEARCH-->
      <div class="flex w-full md:max-w-80">
        <label class="relative text-muted-foreground w-full">
          <div class="absolute left-2.5 top-2.5">
            <ng-icon name="search"></ng-icon>
          </div>
          <input class="py-2 pl-8 pr-2" placeholder="Search..." type="text" [(ngModel)]="search"
                 (keyup.enter)="onSearchChange()"/>
        </label>
      </div>
      <div class="flex flex-row items-center gap-2">
        <dropdown defaultLabel="Export" [options]="exportOptions"></dropdown>
        <status-finding [fixedLabel]="'Mark as'"></status-finding>
        <div class="flex items-center cursor-pointer px-4 py-2 rounded bg-background border border-border">
          <ng-icon name="reload"></ng-icon>
        </div>
      </div>
    </div>
    <table class="table w-full table-auto border-collapse border-0 text-left align-middle leading-5 text-muted-foreground">
      @if(!loading()) {
        <tbody>
          @for (finding of findings(); track $index) {
            <div class="flex flex-row items-center gap-3 p-4 bg-background border-b border-border hover:bg-card">
              <div class="text-center">
                <input
                  class="checkbox checkbox-sm"
                  type="checkbox"/>
              </div>
              <div class="flex flex-row items-center gap-3 cursor-pointer w-full" (click)="onOpenFinding(finding)">
                <ng-icon name="bug" class="text-rose-600" size="20"></ng-icon>
                <div class="flex flex-col gap-1">
                  <div class="font-semibold">
                    {{ finding.name }}
                  </div>
                  <div class="flex flex-row gap-2 border border-border rounded w-fit px-3 py-1"
                       [ngClass]="mStatus.get(finding.status)['style']">
                    <div class="flex flex-row items-center gap-1">
                      <ng-icon [name]="mStatus.get(finding.status)['icon']"></ng-icon>
                      <span>{{mStatus.get(finding.status)['label']}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          }
        </tbody>
      }
    </table>
    @if(loading()) {
      <loading-table></loading-table>
    }
    <pagination class="sticky bottom-0"></pagination>
  </div>
</div>
